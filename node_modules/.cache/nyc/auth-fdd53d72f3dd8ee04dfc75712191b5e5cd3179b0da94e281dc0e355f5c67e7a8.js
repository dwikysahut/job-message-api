function cov_29pkwt4qaq(){var path="/Users/dwikyhutomo/Arkademy/technical-test/jobBoard-api/src/middleware/auth.js";var hash="010c96cb626639b515bc83cfb45e5d30be2243bf";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/dwikyhutomo/Arkademy/technical-test/jobBoard-api/src/middleware/auth.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:15},end:{line:2,column:36}},"2":{start:{line:3,column:0},end:{line:3,column:26}},"3":{start:{line:5,column:0},end:{line:37,column:1}},"4":{start:{line:8,column:22},end:{line:8,column:51}},"5":{start:{line:9,column:8},end:{line:19,column:10}},"6":{start:{line:10,column:12},end:{line:18,column:13}},"7":{start:{line:11,column:16},end:{line:11,column:78}},"8":{start:{line:13,column:16},end:{line:13,column:38}},"9":{start:{line:14,column:16},end:{line:14,column:41}},"10":{start:{line:17,column:16},end:{line:17,column:22}},"11":{start:{line:23,column:22},end:{line:23,column:40}},"12":{start:{line:24,column:8},end:{line:35,column:10}},"13":{start:{line:25,column:12},end:{line:34,column:13}},"14":{start:{line:26,column:16},end:{line:26,column:50}},"15":{start:{line:27,column:16},end:{line:27,column:34}},"16":{start:{line:28,column:16},end:{line:28,column:69}},"17":{start:{line:30,column:18},end:{line:30,column:40}},"18":{start:{line:31,column:18},end:{line:31,column:44}},"19":{start:{line:33,column:16},end:{line:33,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:19},end:{line:6,column:20}},loc:{start:{line:6,column:53},end:{line:20,column:5}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:50},end:{line:9,column:51}},loc:{start:{line:9,column:74},end:{line:19,column:9}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:31},end:{line:22,column:32}},loc:{start:{line:22,column:65},end:{line:36,column:5}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:24,column:44},end:{line:24,column:45}},loc:{start:{line:24,column:69},end:{line:35,column:9}},line:24}},branchMap:{"0":{loc:{start:{line:10,column:12},end:{line:18,column:13}},type:"if",locations:[{start:{line:10,column:12},end:{line:18,column:13}},{start:{line:10,column:12},end:{line:18,column:13}}],line:10},"1":{loc:{start:{line:10,column:16},end:{line:10,column:106}},type:"binary-expr",locations:[{start:{line:10,column:16},end:{line:10,column:21}},{start:{line:10,column:25},end:{line:10,column:59}},{start:{line:10,column:63},end:{line:10,column:68}},{start:{line:10,column:72},end:{line:10,column:106}}],line:10},"2":{loc:{start:{line:25,column:12},end:{line:34,column:13}},type:"if",locations:[{start:{line:25,column:12},end:{line:34,column:13}},{start:{line:25,column:12},end:{line:34,column:13}}],line:25},"3":{loc:{start:{line:25,column:16},end:{line:25,column:106}},type:"binary-expr",locations:[{start:{line:25,column:16},end:{line:25,column:21}},{start:{line:25,column:25},end:{line:25,column:59}},{start:{line:25,column:63},end:{line:25,column:68}},{start:{line:25,column:72},end:{line:25,column:106}}],line:25}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0,0,0],"2":[0,0],"3":[0,0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"010c96cb626639b515bc83cfb45e5d30be2243bf"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_29pkwt4qaq=function(){return actualCoverage;};}return actualCoverage;}cov_29pkwt4qaq();const jwt=(cov_29pkwt4qaq().s[0]++,require('jsonwebtoken'));const helper=(cov_29pkwt4qaq().s[1]++,require('../helpers'));cov_29pkwt4qaq().s[2]++;require('dotenv').config();cov_29pkwt4qaq().s[3]++;module.exports={authorization:function(request,response,next){cov_29pkwt4qaq().f[0]++;const token=(cov_29pkwt4qaq().s[4]++,request.headers.authorization);cov_29pkwt4qaq().s[5]++;jwt.verify(token,process.env.SECRET_KEY,function(error,result){cov_29pkwt4qaq().f[1]++;cov_29pkwt4qaq().s[6]++;if((cov_29pkwt4qaq().b[1][0]++,error)&&(cov_29pkwt4qaq().b[1][1]++,error.name==="TokenExpiredError")||(cov_29pkwt4qaq().b[1][2]++,error)&&(cov_29pkwt4qaq().b[1][3]++,error.name==="JsonWebTokenError")){cov_29pkwt4qaq().b[0][0]++;cov_29pkwt4qaq().s[7]++;return helper.response(response,401,{message:error.name});}else{cov_29pkwt4qaq().b[0][1]++;cov_29pkwt4qaq().s[8]++;request.token=result;cov_29pkwt4qaq().s[9]++;console.log("ini author");cov_29pkwt4qaq().s[10]++;next();}});},authorizationRefreshtoken:function(request,response,next){cov_29pkwt4qaq().f[2]++;const token=(cov_29pkwt4qaq().s[11]++,request.body.token);cov_29pkwt4qaq().s[12]++;jwt.verify(token,'anehpasswordku',function(error,result){cov_29pkwt4qaq().f[3]++;cov_29pkwt4qaq().s[13]++;if((cov_29pkwt4qaq().b[3][0]++,error)&&(cov_29pkwt4qaq().b[3][1]++,error.name==="TokenExpiredError")||(cov_29pkwt4qaq().b[3][2]++,error)&&(cov_29pkwt4qaq().b[3][3]++,error.name==="JsonWebTokenError")){cov_29pkwt4qaq().b[2][0]++;cov_29pkwt4qaq().s[14]++;console.log('ini error di author');cov_29pkwt4qaq().s[15]++;console.log(error);cov_29pkwt4qaq().s[16]++;helper.response(response,401,{message:error.name});}else{cov_29pkwt4qaq().b[2][1]++;cov_29pkwt4qaq().s[17]++;request.token=result;cov_29pkwt4qaq().s[18]++;console.log("ini refresh");cov_29pkwt4qaq().s[19]++;next();}});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiand0IiwicmVxdWlyZSIsImhlbHBlciIsImNvbmZpZyIsIm1vZHVsZSIsImV4cG9ydHMiLCJhdXRob3JpemF0aW9uIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsInRva2VuIiwiaGVhZGVycyIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJTRUNSRVRfS0VZIiwiZXJyb3IiLCJyZXN1bHQiLCJuYW1lIiwibWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJhdXRob3JpemF0aW9uUmVmcmVzaHRva2VuIiwiYm9keSJdLCJtYXBwaW5ncyI6InErR0FlWTsyRkFmWixLQUFNQSxDQUFBQSxHQUFHLDBCQUFHQyxPQUFPLENBQUMsY0FBRCxDQUFWLENBQVQsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHRCxPQUFPLENBQUMsWUFBRCxDQUFWLENBQVosQyx3QkFDQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkUsTUFBbEIsRyx3QkFFQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2JDLGFBQWEsQ0FBRSxTQUFTQyxPQUFULENBQWtCQyxRQUFsQixDQUE0QkMsSUFBNUIsQ0FBa0MseUJBRTdDLEtBQU1DLENBQUFBLEtBQUssMEJBQUdILE9BQU8sQ0FBQ0ksT0FBUixDQUFnQkwsYUFBbkIsQ0FBWCxDQUY2Qyx3QkFHN0NOLEdBQUcsQ0FBQ1ksTUFBSixDQUFXRixLQUFYLENBQWtCRyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBMEMsU0FBU0MsS0FBVCxDQUFnQkMsTUFBaEIsQ0FBd0IsaURBQzlELEdBQUksNEJBQUFELEtBQUssK0JBQUlBLEtBQUssQ0FBQ0UsSUFBTixHQUFlLG1CQUFuQixDQUFMLEVBQStDLDRCQUFBRixLQUFLLCtCQUFJQSxLQUFLLENBQUNFLElBQU4sR0FBZSxtQkFBbkIsQ0FBeEQsQ0FBZ0csb0RBQzVGLE1BQU9oQixDQUFBQSxNQUFNLENBQUNNLFFBQVAsQ0FBZ0JBLFFBQWhCLENBQTBCLEdBQTFCLENBQStCLENBQUVXLE9BQU8sQ0FBRUgsS0FBSyxDQUFDRSxJQUFqQixDQUEvQixDQUFQLENBQ0gsQ0FGRCxJQUVPLG9EQUNIWCxPQUFPLENBQUNHLEtBQVIsQ0FBZ0JPLE1BQWhCLENBREcsd0JBRUhHLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFlBQVosRUFGRyx5QkFLSFosSUFBSSxHQUNQLENBQ0osQ0FWRCxFQVdILENBZlksQ0FpQmJhLHlCQUF5QixDQUFFLFNBQVNmLE9BQVQsQ0FBa0JDLFFBQWxCLENBQTRCQyxJQUE1QixDQUFrQyx5QkFDekQsS0FBTUMsQ0FBQUEsS0FBSywyQkFBR0gsT0FBTyxDQUFDZ0IsSUFBUixDQUFhYixLQUFoQixDQUFYLENBRHlELHlCQUV6RFYsR0FBRyxDQUFDWSxNQUFKLENBQVdGLEtBQVgsQ0FBa0IsZ0JBQWxCLENBQW9DLFNBQVVNLEtBQVYsQ0FBaUJDLE1BQWpCLENBQXlCLGtEQUN6RCxHQUFJLDRCQUFBRCxLQUFLLCtCQUFJQSxLQUFLLENBQUNFLElBQU4sR0FBZSxtQkFBbkIsQ0FBTCxFQUErQyw0QkFBQUYsS0FBSywrQkFBSUEsS0FBSyxDQUFDRSxJQUFOLEdBQWUsbUJBQW5CLENBQXhELENBQWdHLHFEQUM1RkUsT0FBTyxDQUFDQyxHQUFSLENBQVkscUJBQVosRUFENEYseUJBRTVGRCxPQUFPLENBQUNDLEdBQVIsQ0FBWUwsS0FBWixFQUY0Rix5QkFHNUZkLE1BQU0sQ0FBQ00sUUFBUCxDQUFnQkEsUUFBaEIsQ0FBMEIsR0FBMUIsQ0FBK0IsQ0FBQ1csT0FBTyxDQUFFSCxLQUFLLENBQUNFLElBQWhCLENBQS9CLEVBQ0gsQ0FKRCxJQUlPLHFEQUNEWCxPQUFPLENBQUNHLEtBQVIsQ0FBZ0JPLE1BQWhCLENBREMseUJBRURHLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGFBQVosRUFGQyx5QkFJSFosSUFBSSxHQUNQLENBQ0osQ0FYRCxFQVlILENBL0JZLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJylcbmNvbnN0IGhlbHBlciA9IHJlcXVpcmUoJy4uL2hlbHBlcnMnKVxucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgYXV0aG9yaXphdGlvbjogZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UsIG5leHQpIHtcblxuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcXVlc3QuaGVhZGVycy5hdXRob3JpemF0aW9uXG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlNFQ1JFVF9LRVksIGZ1bmN0aW9uKGVycm9yLCByZXN1bHQpIHsgXG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJUb2tlbkV4cGlyZWRFcnJvclwiIHx8IGVycm9yICYmIGVycm9yLm5hbWUgPT09IFwiSnNvbldlYlRva2VuRXJyb3JcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBoZWxwZXIucmVzcG9uc2UocmVzcG9uc2UsIDQwMSwgeyBtZXNzYWdlOiBlcnJvci5uYW1lIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QudG9rZW4gPSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImluaSBhdXRob3JcIilcblxuXG4gICAgICAgICAgICAgICAgbmV4dCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSAsXG4gICAgXG4gICAgYXV0aG9yaXphdGlvblJlZnJlc2h0b2tlbjogZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UsIG5leHQpIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmJvZHkudG9rZW5cbiAgICAgICAgand0LnZlcmlmeSh0b2tlbiwgJ2FuZWhwYXNzd29yZGt1JywgZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5uYW1lID09PSBcIlRva2VuRXhwaXJlZEVycm9yXCIgfHwgZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJKc29uV2ViVG9rZW5FcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaSBlcnJvciBkaSBhdXRob3InKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgICAgICAgICAgICAgIGhlbHBlci5yZXNwb25zZShyZXNwb25zZSwgNDAxLCB7bWVzc2FnZTogZXJyb3IubmFtZX0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmVxdWVzdC50b2tlbiA9IHJlc3VsdFxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbmkgcmVmcmVzaFwiKVxuXG4gICAgICAgICAgICAgICAgbmV4dCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSJdfQ==